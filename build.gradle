/*
 * This file was generated by the Gradle 'init' task.
 */

plugins {
    id 'java'
    id 'maven'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '4.0.2'
    id 'org.jetbrains.kotlin.jvm' version '1.3.10'
}

sourceSets {
    main.kotlin.srcDirs += "src/main/kotlin"
}

repositories {
    mavenLocal()
    maven {
        url = 'http://repo.maven.apache.org/maven2'
    }
}

dependencies {
    compile 'org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.3.11'
    compile 'com.zandero:rest.vertx:0.8.8'
    compile 'io.vertx:vertx-mongo-client:3.6.2'
    compile 'com.google.code.gson:gson:2.8.0'
    compile 'io.vertx:vertx-rx-java2:3.6.2'
    compile 'io.vertx:vertx-config:3.6.2'
    compile 'io.vertx:vertx-core:3.6.2'
    compile 'io.vertx:vertx-lang-kotlin:3.6.2'
    testCompile 'org.jetbrains.kotlin:kotlin-test-junit:1.3.11'
    testCompile 'junit:junit:4.12'
}

mainClassName = "com.scratch.vba.VbaApp"

shadowJar {
    baseName = "vba"
    classifier = "shadow"
    manifest {
        attributes "Main-Class": mainClassName
    }
    mergeServiceFiles()
}

group = 'com.scratch.vba'
version = '1.0.0'
description = 'vba-service'
sourceCompatibility = '1.8'

task start(type: JavaExec, dependsOn: compileJava) {
    main = mainClassName
    jvmArgs = ["-Xms256m", "-Xmx512m"]
    classpath = sourceSets.main.runtimeClasspath
}

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile).all {
    kotlinOptions {
        jvmTarget = "1.8"
    }
}